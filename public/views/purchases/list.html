<div class="container">
	<h1>Purchases</h1>
		<div>
			Status
			<select ng-model="status" ng-options="status | purchaseStatus for status in purchaseStatus" ng-change="refresh()"></select>
		</div>
		<div class="headerList">
			<div>Customer</div>
			<div>Date</div>
			<div>Status</div>
			<div>Action</div>
		</div>
		<div class="clear-fix itemList" ng-repeat="purchase in purchases" ng-class-even="'odd'" ng-class-odd="'odd'">
			<div>{{purchase._customer.name}}&nbsp;{{purchase._customer.surname}}</div>
			<div>{{purchase.date | date:'yyyy-MM-dd HH:mm'}}</div>
			<div>{{purchase.status | purchaseStatus}}</div>
			<div>
				<a ng-show="purchase.status == 'in_progress'" ng-href="/purchases/delete/{{purchase._id}}"><img src="/images/bin-24.png" alt="Delete" title="Delete"></a>
				<span ng-switch on="purchase.status">
					<a ng-switch-when="in_progress" ng-click="nextStatus(purchase)"><img src="/images/right-24.png" alt="Deliver" title="Deliver"></a>
					<a ng-switch-when="delivered" ng-click="nextStatus(purchase)"><img src="/images/right-24.png" alt="Pay" title="Pay"></a>
					<a ng-switch-when="payed" ng-click="nextStatus(purchase)"><img src="/images/right-24.png" alt="Close" title="Close"></a>
				</span>
			</div>
		</div>
		<br/>
		<br/>
	<a class="button" ng-href="/purchases/create">New <img src="/images/Add-24.png"></a>
</div>
